#include <Servo.h>

Servo servo1;
Servo servo2;

void setup() {
  Serial.begin(9600);
  servo1.attach(9);
  servo2.attach(10);

  // Set the initial position of the servos
  servo1.write(90);
  servo2.write(90);
}

int faceX = 480;
int faceY = 270;

void receivePosition() {
  // Wait for data to be available
  while (!Serial.available()) {}

  // Read the X position
  String xString = Serial.readStringUntil(',');
  faceX = xString.toInt();

  // Read the Y position
  String yString = Serial.readStringUntil('\n');
  faceY = yString.toInt();

//  Serial.println("----------");
//  Serial.print("Received position: ");
//  Serial.print(faceX);
//  Serial.print(",");
//  Serial.println(faceY);
}

void moveServos() {
  // Map the X and Y positions to servo angles
  int servo1Target = map(faceX, 0, 960, 180, 0);
  int servo2Target = map(faceY, 0, 540, 140, 50);

  // Gradually adjust the servo angles towards the new angles
  int servo1Current = servo1.read();
  int servo2Current = servo2.read();
  int servo1Step = (servo1Target - servo1Current) / 10;
  int servo2Step = (servo2Target - servo2Current) / 10;
  for (int i = 0; i < 10; i++) {
    servo1Current += servo1Step;
    servo2Current += servo2Step;
    servo1.write(servo1Current);
    delay(50);
    servo2.write(servo2Current);
    delay(50);
    }
  Serial.println("----------");
  Serial.print("Set servo angles: ");
  Serial.print(servo1Target);
  Serial.print(",");
  Serial.println(servo2Target);
}

void loop() {
  receivePosition();
  delay(50); // Add a small delay to allow servo motors to move to the correct position
  moveServos();
  delay(50);
}